# Contributte Turnstile

Integration of [Cloudflare Turnstile](https://developers.cloudflare.com/turnstile/) for Nette Framework.

## Content

- [Setup](#setup)
- [Relying](#relying)
- [Configuration](#configuration)
- [Mapping](#mapping)
  - [Attributes](#attributes)
  - [Annotations](#annotations)
  - [XML](#xml)
  - [Helpers](#helpers)
- [Examples](#examples)
- [Other](#other)

## Installation

Install package using composer.

```bash
composer require contributte/turnstile
```

Register prepared [compiler extension](https://doc.nette.org/en/dependency-injection/nette-container) in your `config.neon` file.

```neon
extensions:
  turnstile: Contributte\Turnstile\DI\TurnstileExtension
```

## Configuration

The Turnstile extension requires a secret key that you can obtain from your [Cloudflare dashboard](https://dash.cloudflare.com). This key is used to verify the token generated by the Turnstile widget.

Configuration scheme:

```neon
turnstile:
  secret: <string>
```

For example:

```neon
turnstile:
  secret: abcdefghijklmnopqrstuvwxyz1234567890
```

## Usage

Add the Turnstile widget to your Nette form.

```php
$form = new Form();

$form->addTurnstile('captcha')
  ->setValidation('The CAPTCHA is invalid. Please try again.');

$form->onSuccess[] = function (Form $form) {
  // ...
};
```

**Strict types**

Use `TurnstileControl::use()` to add the Turnstile widget to the form and return TurnstileControl type.

```php
$form = new Form();

TurnstileControl::use($form, 'captcha')
  ->setValidation('The CAPTCHA is invalid. Please try again.');

$form->onSuccess[] = function (Form $form) {
  // ...
};
```

## Demo

TODO screenshot

## Examples

> [!TIP]
> Take a look at more examples in [contributte/captcha-skeleton](https://github.com/contributte/captcha-skeleton).
